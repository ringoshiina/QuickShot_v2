# Landcloud QuickShot v4.0

专为 Landcloud 平台定制的高效截图工具，能够自动提取页面中的项目编号和地块编号，并按标准规范自动命名和归档截图。

## ✨ 主要功能 (Features)

*   **智能识别**：自动从页面内容中提取"项目编号"和"地块编号"。
*   **自动命名**：截图文件自动按 `{根目录}/{项目编号}/{地块编号}-{序号}.png` 格式命名，无需手动输入。
*   **一键截图**：支持点击图标或使用快捷键 (`Alt+Q`) 快速截图。
*   **智能归档**：自动创建文件夹层级，保持下载目录整洁有序。
*   **自动处理**：截图前自动勾选"全方位"复选框（如果存在），确保截图内容完整。
*   **防白屏机制**：内置重试逻辑，有效防止截图白屏问题。
*   **自动多地块连拍**：当前地块截图完成后，自动识别并切换到下一个地块继续截图，实现无人值守的批量处理。
*   **Badge 状态显示**：扩展图标显示截图进度（如 "REC"、"1/10"），直观了解当前状态。
*   **完成通知**：截图完成后显示系统通知，无需持续关注浏览器。

## 🚀 安装步骤 (Installation)

1.  **下载代码**：
    *   点击本页面右上角的 `Code` -> `Download ZIP` 下载源码包并解压。
    *   或者使用 Git 克隆：`git clone https://github.com/your-repo/QuickShot.git`

2.  **打开扩展程序页面**：
    *   在 Chrome 浏览器地址栏输入 `chrome://extensions/` 并回车。
    *   或者点击浏览器右上角的三个点图标 -> "扩展程序" -> "管理扩展程序"。

3.  **开启开发者模式**：
    *   在页面右上角找到"开发者模式" (Developer mode) 开关，并将其打开。

4.  **加载扩展程序**：
    *   点击左上角的"加载已解压的扩展程序" (Load unpacked) 按钮。
    *   在弹出的文件选择窗口中，找到并选中解压后的 `QuickShot_v4.0` 文件夹。

5.  **完成安装**：
    *   此时你应该能在列表中看到 "Landcloud QuickShot" 扩展程序。
    *   建议点击浏览器右上角的"拼图"图标，将 QuickShot **固定 (Pin)** 到工具栏，方便随时使用。

## 📖 使用指南 (Usage)

1.  **进入页面**：
    *   在 Chrome 浏览器中打开 Landcloud 平台的项目或地块详情页（建议进入大图查看模式）。

2.  **执行截图**：
    *   **快捷键**：按下 `Alt+Q` (默认)。
    *   **图标点击**：点击浏览器工具栏上的 QuickShot 图标，然后点击"一键截图"。

3.  **自动连拍 (Auto Capture)**：
    *   **功能**：自动点击页面上的"下一张"按钮并截图。当当前地块的所有图片截取完毕后，会自动点击"下一个"地块按钮，并继续截图。
    *   **启动**：点击扩展图标，点击绿色的"开始自动连拍"按钮。
    *   **停止**：点击扩展图标，点击红色的"停止自动连拍"按钮（或等待所有地块完成）。
    *   **提示**：切换地块后会弹出提示框，提醒您手动调整地图缩放级别，调整完成后点击确定继续。
    *   **注意**：连拍过程中请勿关闭页面或切换标签页，以免中断。

4.  **查看结果**：
    *   截图将自动保存到浏览器的默认下载目录中。
    *   **默认路径示例**：`Downloads/F24/F24E81010/F24E81010-09-1.png`
    *   如果页面中包含序号（如 1/5），文件名会自动包含序号。

## ⚙️ 配置说明 (Configuration)

右键点击扩展图标，选择"选项" (Options)，或在弹出窗口中点击"设置"即可进入配置页面：

*   **根目录 (Root Directory)**：设置截图保存的一级子目录名称，默认为 `F24`。
*   **截图间隔 (Capture Delay)**：设置截图前的等待时间（毫秒），默认为 `2500` ms。
*   **切换等待时长 (Parcel Switch Delay)**：设置切换地块后的等待时间（毫秒），默认为 `3500` ms。
*   **连拍上限 (Max Capture Count)**：设置自动连拍的最大张数，`0` 表示不限制。
*   **自动切换到下一地块**：控制是否自动切换地块，取消勾选则只截当前地块。

## ⌨️ 快捷键设置

如果默认的 `Alt+Q` 快捷键与其他软件冲突或不生效：
1.  在浏览器地址栏输入 `chrome://extensions/shortcuts`。
2.  找到 "Landcloud QuickShot"。
3.  点击输入框并按下你想要的新快捷键组合（例如 `Ctrl+Shift+S`）。

## ⚠️ 注意事项

*   **权限提示**：首次使用时，Chrome 可能会提示请求调试权限 (Debugger)，请点击"允许"。
*   **文件覆盖**：如果同一位置已存在同名文件，新截图会自动重命名（例如添加 `(1)`），不会覆盖原文件。
*   **下载目录限制**：出于安全原因，Chrome 扩展只能将文件保存到默认下载目录及其子目录中。
*   **地图缩放**：切换地块后需手动调整地图缩放级别（按键盘 + 放大），然后点击确定继续。

## 📝 版本历史

*   **v4.0**: 架构重构，模块化设计；新增 Badge 状态显示和系统通知；修复头像误点击问题；新增自动切换地块开关设置。
*   **v3.0**: 新增多地块自动切换功能，支持无人值守批量截图；优化 UI 设置。
*   **v2.2**: 修复地块编号识别问题，支持多级编号（如 `F23NC011-04-03`）。
*   **v2.1**: 新增"连拍上限"设置。
*   **v2.0**: 重构核心逻辑，优化 ID 提取算法。
*   **v1.0**: 初始版本。
